# Spiron Consensus Engine Configuration

# Profile Selection: LOW_LATENCY, MIN_QUORUM, MAX_QUORUM, BALANCED
# LOW_LATENCY: Fast convergence, lower safety guarantees (α=0.75, siphon=0.3, angular=0.5, commit=0.8)
# MIN_QUORUM: Balanced with minimal quorum (α=0.8, siphon=0.4, angular=0.55, commit=0.9)
# MAX_QUORUM: Maximum safety, slower convergence (α=0.9, siphon=0.5, angular=0.7, commit=1.2)
# BALANCED: Default balanced settings (α=0.85, siphon=0.45, angular=0.6, commit=1.0)
spiron.profile=BALANCED

# Node Configuration
spiron.node.id=node-0
spiron.port=8080

# Vector Configuration (128-2000 dimensions)
spiron.vector.dimensions=128

# Cluster Configuration
# Mode: solo (single machine, multiple ports) or cluster (distributed)
spiron.cluster.mode=solo
spiron.cluster.peers=
spiron.cluster.solo-instances=3
spiron.cluster.base-port=8080

# Discovery Configuration
# Type: static, dns, kubernetes
spiron.cluster.discovery.type=static
spiron.cluster.discovery.service-name=spiron-cluster
spiron.cluster.discovery.namespace=default
spiron.cluster.discovery.health-check-interval-ms=5000

# Consensus Parameters (auto-configured by profile, can be overridden)
#spiron.damping.alpha=0.85
#spiron.siphon.factor=0.45
#spiron.angular.threshold=0.6
#spiron.commit.energy=1.0
#spiron.consensus.max-iterations=100
#spiron.consensus.convergence-threshold=0.001

# Storage Configuration
spiron.data.dir=/tmp/spiron
spiron.storage.mode=solo
spiron.etcd.endpoints=

# Metrics Configuration
spiron.metrics.enabled=true
spiron.metrics.port=9090

# RPC Configuration
spiron.rpc.workerThreads=4

# BLS Cryptography (optional deterministic seed)
spiron.bls.seed=

# Gossip Protocol Configuration
spiron.gossip.interval.ms=500

# Approval finality threshold
spiron.approval.finality.threshold=3

# Consensus mode: "crdt" (default) or "energy" (legacy)
spiron.consensus.mode=crdt

# Broadcast Validation Configuration (Crash Fault Tolerance)
# Energy bounds for incoming broadcast messages
# Note: max-energy should be LESS than spiron.commit.energy to allow proper merging
# before commit. Profile commit energies: LOW_LATENCY=0.8, BALANCED=1.0, MAX_QUORUM=1.2
spiron.broadcast.validation.min-energy=0.0
spiron.broadcast.validation.max-energy=0.75

# ID pattern validation (regex) - alphanumeric, hyphens, underscores, 1-128 chars
spiron.broadcast.validation.id-pattern=^[a-zA-Z0-9_-]{1,128}$

# Duplicate Detection Configuration
# Expiry time for duplicate message tracking (milliseconds)
spiron.broadcast.duplicate.expiry-ms=60000

# Rate Limiting Configuration
# Maximum broadcast requests per second per peer
spiron.broadcast.rate-limit.requests-per-second=10000

# Peer Allowlist Configuration
# Regex pattern for allowed peer IDs (empty = allow all peers)
# Example: ^(localhost|127\\.0\\.0\\.1|192\\.168\\..*):.*$ for local network only
spiron.broadcast.peer.allowlist-regex=
